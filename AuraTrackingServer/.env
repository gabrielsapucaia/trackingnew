# =============================================================================
# AuraTracking Server - Environment Variables
# =============================================================================
# Copy this file to .env and customize for your environment
# =============================================================================

# -----------------------------------------------------------------------------
# MQTT - EMQX Broker
# -----------------------------------------------------------------------------
EMQX_DASHBOARD_USER=admin
EMQX_DASHBOARD_PASSWORD=AuraTrack@2024!
MQTT_HOST=emqx
MQTT_PORT=1883

# -----------------------------------------------------------------------------
# TimescaleDB - PostgreSQL with time-series extensions
# -----------------------------------------------------------------------------
POSTGRES_USER=aura
POSTGRES_PASSWORD=AuraTrack@DB2024!
POSTGRES_DB=auratracking
POSTGRES_HOST=timescaledb
POSTGRES_PORT=5432

# Database URL for ingest worker
DATABASE_URL=postgresql://aura:AuraTrack@DB2024!@timescaledb:5432/auratracking

# -----------------------------------------------------------------------------
# Grafana
# -----------------------------------------------------------------------------
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=AuraTrack@2024!
GF_INSTALL_PLUGINS=grafana-worldmap-panel,grafana-clock-panel

# -----------------------------------------------------------------------------
# Ingest Worker
# -----------------------------------------------------------------------------
# Batch size for inserting telemetry data
BATCH_SIZE=100

# Flush interval in seconds
FLUSH_INTERVAL=5

# Max offline queue size before dropping old entries
MAX_QUEUE_SIZE=50000

# MQTT topics to subscribe
MQTT_TOPICS=aura/tracking/+/telemetry

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Network Configuration (for production)
# -----------------------------------------------------------------------------
# Server IP on intranet - update Android app to point to this
SERVER_IP=10.10.10.10

# -----------------------------------------------------------------------------
# Retention Policies
# -----------------------------------------------------------------------------
# Raw data compression after N days
COMPRESS_AFTER_DAYS=3

# Data retention in days (raw data)
RETENTION_DAYS=180

# Aggregated data retention (1-minute averages)
AGGREGATED_RETENTION_DAYS=365

# -----------------------------------------------------------------------------
# Alerts (for future use)
# -----------------------------------------------------------------------------
# Speed threshold in km/h for alerts
SPEED_ALERT_THRESHOLD=60

# Acceleration threshold in m/sÂ² for harsh event detection
ACCELERATION_ALERT_THRESHOLD=3.0

# GPS accuracy threshold in meters
GPS_ACCURACY_THRESHOLD=25
